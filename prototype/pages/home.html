<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aspen District View</title>

  <link rel="stylesheet" href="../styles/common-mo.css">
  <link rel="stylesheet" href="../styles/layout.css">
  <link rel="stylesheet" href="../styles/utils.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/themes.css">
</head>
<body>
  <a href="#mainContent" class="skip-link">Skip to main content</a>
  <form name="authenticatedActionForm" method="post" action="/aspen/home.do">
    <input type="hidden" name="org.apache.struts.taglib.html.TOKEN" value="af769c85d55ffa9d66033b7705551f45">
    <input type="hidden" id="userEvent" name="userEvent" value="0">
    <input type="hidden" id="userParam" name="userParam" value="">
    <input type="hidden" id="operationId" name="operationId" value="">
    <input type="hidden" id="deploymentId" name="deploymentId" value="aspen">
    <input type="hidden" id="scrollX" name="scrollX" value="0">
    <input type="hidden" id="scrollY" name="scrollY" value="0">
    <input type="hidden" id="formFocusField" name="formFocusField" value="">
    <div class="layout-wrapper">
      <header class="top-nav" role="banner">
        <div class="top-nav__left">
          <div class="top-nav__branding">
            <img src="../../images/aspen-header-logo.png" alt="Aspen Logo" class="branding__logo">
            <span class="branding__title">Chicago Public Schools</span>
          </div>
          <!-- Dropdowns next to logo -->
          <div class="topbar-dropdowns">
              <div class="view-selector-dropdown">
                <label for="viewSelect" class="visually-hidden">Select View</label>
                <select id="viewSelect" name="viewSelect" aria-label="Select View" class="topbar-select">
                  <option value="district" selected>District</option>
                  <option value="school">School</option>
                  <option value="health">Health</option>
                </select>
              </div>
              <div class="school-selector">
                <label for="schoolSelect" class="visually-hidden">Select School</label>
                <select id="schoolSelect" name="schoolSelect" aria-label="Select School" class="topbar-select">
                  <option>School A</option>
                  <option>School B</option>
                  <option>School C</option>
                  <option>School D</option>
                  <option>School E</option>
                </select>
              </div>
            </div>
          </div>
        <div class="user-menu">
          <span id="userName" class="user-name">Jane Admin</span>
          <button type="button" id="logoutBtn" class="logout-btn">Log Out</button>
        </div>
      </header>
      <section class="hero-banner">
        <div class="hero-animated-bg">
          <svg width="100%" height="100%" viewBox="0 0 1440 180" fill="none" xmlns="http://www.w3.org/2000/svg" class="hero-animated-svg">
            <path d="M0,120 Q360,180 720,120 T1440,120 V180 H0Z" fill="#b3c7e6" fill-opacity="0.13">
              <animate attributeName="d" dur="8s" repeatCount="indefinite"
                values="M0,120 Q360,180 720,120 T1440,120 V180 H0Z;M0,110 Q360,160 720,130 T1440,110 V180 H0Z;M0,120 Q360,180 720,120 T1440,120 V180 H0Z" />
            </path>
          </svg>
        </div>
        <div class="hero-content-box">
          <h1 class="hero-title">Welcome to Aspen</h1>
          <p class="hero-subtitle">Empowering educators, students, and families to connect, collaborate, and succeed together.</p>
          <p class="hero-desc">This is your community hub for learning, support, and growth across Chicago Public Schools.</p>
        </div>
      </section>
      <div class="theme-toggle-bar">
        <button type="button" id="themeToggle" class="theme-toggle" aria-label="Toggle color scheme" aria-pressed="false">
          <span id="themeIcon" aria-hidden="true" class="theme-toggle-icon">üåû</span> <span>Toggle Theme</span>
        </button>
      </div>

    <div class="layout-grid">
      <aside class="layout-grid__sidebar sidebar sidebar--padded" aria-label="Sidebar" role="complementary">
        <nav aria-label="Sidebar navigation" role="navigation">
          <ul class="sidebar-list">
            <li><a href="#" class="sidebar-link sidebar-link-animated sidebar-link--bold" tabindex="0">Dashboard</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">My Students</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Attendance</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Gradebook</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Reports</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Resources</a></li>
            <li class="sidebar-tip-wrapper">
              <div class="sidebar-tip">
                <strong>Community Tip:</strong><br>
                <span>Connect with colleagues in the <a href="#" class="sidebar-tip-link">Staff Room</a> or check <a href="#" class="sidebar-tip-link">District News</a>.</span>
              </div>
            </li>
          </ul>
        </nav>
      </aside>

      <main id="mainContent" class="layout-grid__main main-panel main-panel--padded" tabindex="-1" aria-label="Main content">
        <div class="main-widgets widgets-grid">
          <div class="widgets-left widgets-left--column">
            <section class="widget">
              <div class="widget__header"><h2 class="widget__title">Quick Links</h2></div>
              <div class="widget__body">
                <ul class="quick-links-list">
                  <li><a href="#" class="quick-link" tabindex="0">View Students</a></li>
                  <li><a href="#" class="quick-link" tabindex="0">Attendance</a></li>
                  <li><a href="#" class="quick-link" tabindex="0">Gradebook</a></li>
                </ul>
              </div>
            </section>
            <section class="widget">
              <div class="widget__header"><h2 class="widget__title">Student Search</h2></div>
              <div class="widget__body">
                <form class="find-bar student-search-form" role="search" aria-label="Student search" onsubmit="return false;">
                  <input type="text" placeholder="Search students" aria-label="Search students" class="student-search-input" id="studentSearchInput">
                  <button type="submit" id="studentSearchBtn" class="student-search-btn" aria-label="Filter students">Filter</button>
                </form>
                <div id="studentSearchResult" class="student-search-result" aria-live="polite"></div>
              </div>
            </section>
            <section class="widget">
              <div class="widget__header"><h2 class="widget__title">Workflows</h2></div>
              <div class="widget__body"><p class="widget-muted-text">No current workflows.</p></div>
            </section>
            <section class="widget">
              <div class="widget__header"><h2 class="widget__title">Published Reports</h2></div>
              <div class="widget__body"><p class="widget-muted-text">No published reports.</p></div>
            </section>
          </div>
          <div class="widgets-right widgets-right--column">
            <section class="widget">
              <div class="widget__header"><h2 class="widget__title">Announcements</h2></div>
              <div class="widget__body"><p class="widget-muted-text">No announcements.</p></div>
            </section>
            <section class="widget widget-board">
              <div class="widget__header"><h2 class="widget__title">Community Board</h2></div>
              <div class="widget__body"><p class="community-board-text">Share a resource, celebrate a success, or ask for help! <a href="#" class="community-board-link">Post to the board</a></p></div>
            </section>
            <section class="widget widget-featured">
              <div class="widget__header"><h2 class="widget__title"><span class="widget-featured-icon">‚≠ê</span> Featured Resource</h2></div>
              <div class="widget__body"><p class="featured-resource-text">Check out the new <a href="#" class="featured-resource-link">CPS Family Engagement Toolkit</a> for ideas to strengthen your classroom community.</p></div>
            </section>
          </div>
        </div>
      </main>
    </div>
    </div>
  </form>
  <script type="module" src="../scripts/components.js"></script>
  <style>
    /* Dynamic theme variables for view selection */
    :root {
      --color-primary: #4A90E2; /* Denim Blue */
      --color-accent: #73C6B6; /* Soft Teal */
      font-size: 1.45em;
      font-weight: 700;
      color: var(--color-primary);
      letter-spacing: 0.01em;
      margin-left: 0.7em;
      vertical-align: middle;
      text-shadow: 0 2px 8px #00336633, 0 1px 0 #fff8, 0 0 2px #fff8;
      background: rgba(255,255,255,0.72);
      border-radius: 7px;
      padding: 0.15em 0.7em 0.15em 0.5em;
      box-shadow: 0 2px 8px #00336611;
      transition: background 0.18s, color 0.18s;
      display: inline-block;
    }
    html[data-theme="dark"] {
      --color-primary: #4A90E2;
      --color-accent: #73C6B6;
      --color-bg: #232b3a;
      --color-highlight: #ffe066;
      --color-error: #F67280;
      --color-alt: #A28DFF;
      --color-success: #B2F2BB;
      --color-on-primary: #fff;
      --color-on-bg: #eaf1fb;
    }
    body, .layout-wrapper {
      background: var(--color-bg) !important;
      color: var(--color-on-bg) !important;
    }
    .main-panel {
      background: #fff !important;
      /* Add a semi-transparent overlay for better text contrast */
      color: var(--color-on-bg) !important;
    .top-nav::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(255,255,255,0.82) 0%, rgba(255,255,255,0.62) 100%);
      z-index: 0;
      border-radius: 0 0 18px 18px;
      pointer-events: none;
    }
    .top-nav > * {
      position: relative;
      z-index: 1;
      box-shadow: 0 2px 16px #00336611 !important;
    }
    html[data-theme="dark"] .main-panel {
      background: #232b3a !important;
      gap: 0.3em;
      color: var(--color-on-bg) !important;
      box-shadow: 0 2px 16px #0006 !important;
    }
    .widget {
      background: #f9fafb;
      color: var(--color-on-bg) !important;
    }
    html[data-theme="dark"] .widget {
      background: #273146 !important;
      color: var(--color-on-bg) !important;
    }
    .widget__header h2,
      font-size: 1.08em;
      font-weight: 600;
    .widget__title {
      color: var(--color-primary) !important;
    }
      color: var(--color-primary) !important;
      font-weight: 700;
      font-size: 1.08em;
      letter-spacing: 0.01em;
      vertical-align: middle;
      transition: color 0.18s;
      text-shadow: 0 1px 4px #fff8, 0 2px 8px #00336622;
    html[data-theme="dark"] .sidebar {
      background: #20293a !important;
      border-right: 1px solid #2d3a4d !important;
      color: var(--color-on-bg) !important;
      box-shadow: 2px 0 8px #0002 !important;
    }
      font-weight: 600;
      font-size: 1em;
      color: var(--color-primary) !important;
    }
    html[data-theme="dark"] .sidebar-link-animated {
      color: var(--color-highlight) !important;
    }
    .sidebar-link-animated:hover, .sidebar-link-animated:focus {
      background: var(--color-accent, #eaf1fb);
      color: var(--color-on-primary, #003366);
      box-shadow: 0 2px 8px #00336611;
      box-shadow: 0 2px 8px #00336633;
      outline: none;
      text-decoration: none;
      gap: 1.2rem;
      display: flex;
      align-items: center;
    }
    html[data-theme="dark"] .sidebar-link-animated:hover, html[data-theme="dark"] .sidebar-link-animated:focus {
      background: rgba(255,255,255,0.08) !important;
      color: var(--color-highlight, #ffe066) !important;
      border-left: 4px solid var(--color-highlight, #ffe066) !important;
      text-decoration: none !important;
    }
    .topbar-select {
      padding: 0.4em 1.7em 0.4em 0.7em;
      border-radius: 7px;
      border: 2px solid var(--color-accent, #73C6B6);
      font-size: 1em;
      background: #fff;
      font-weight: 600;
      min-width: 120px;
      box-shadow: 0 1px 6px #00336611;
      transition: border 0.18s, box-shadow 0.18s, background 0.18s, color 0.18s;
      appearance: none;
      outline: none;
      text-shadow: 0 1px 2px #fff8;
      font-weight: 500;
      margin: 0;
      height: 2.3em;
      position: relative;
      background-clip: padding-box;
      backdrop-filter: blur(1.5px);
      outline: 2px solid var(--color-highlight, #F9D342);
      outline-offset: 2px;
    }
    .topbar-select:focus {
      border-color: var(--color-highlight, #F9D342);
      box-shadow: 0 0 0 2px var(--color-highlight, #F9D342)33;
      gap: 1.2em;
      background: #f7fafd;
      color: var(--color-primary, #003366);
    }
    html[data-theme="dark"] .topbar-select {
      background: #232b3a !important;
      color: var(--color-highlight, #ffe066) !important;
      border: 2px solid var(--color-highlight, #ffe066) !important;
      box-shadow: 0 1px 6px #0008 !important;
      filter: brightness(1);
    }
    html[data-theme="dark"] .topbar-select:focus {
      background: #273146 !important;
      border-color: var(--color-highlight, #ffe066) !important;
      box-shadow: 0 0 0 2px var(--color-highlight, #ffe066)33 !important;
      color: var(--color-highlight, #ffe066) !important;
    }
    .topbar-select option {
      background: #fff;
      color: var(--color-primary, #003366);
      font-weight: 500;
    }
    html[data-theme="dark"] .topbar-select option {
      background: #232b3a !important;
      color: var(--color-highlight, #ffe066) !important;
      font-weight: 500;
    }
    .user-menu {
      color: var(--color-primary) !important;
      background: linear-gradient(90deg, #eaf1fb 0%, #f7fafd 100%);
      border-radius: 8px;
      padding: 0.3em 1.1em 0.3em 0.7em;
      box-shadow: 0 1px 6px #00336611;
      margin-left: 1.5em;
      min-width: 120px;
      display: flex;
      align-items: center;
      gap: 1em;
    }
    .logout-btn {
      color: var(--color-primary) !important;
      background: #eaf1fb;
      border-radius: 6px;
      padding: 0.3em 1.1em;
      font-weight: 500;
      transition: background 0.18s, color 0.18s;
      border: 1.5px solid var(--color-primary);
      margin-left: 0.5em;
    }
    .logout-btn:hover, .logout-btn:focus {
      background: var(--color-primary);
      color: #fff !important;
      outline: 2px solid var(--color-highlight);
      outline-offset: 2px;
    }
    .theme-toggle {
      background: var(--color-accent) !important;
      color: var(--color-primary) !important;
      border: 1px solid var(--color-primary) !important;
    }
    .hero-banner {
      background: linear-gradient(120deg, var(--color-accent) 0%, var(--color-bg) 100%) !important;
    }
    .hero-animated-bg path {
      fill: var(--color-primary) !important;
      fill-opacity: 0.13 !important;
    }
    /* Remove main-tabs styles since tabs are removed */
    /* Topbar dropdowns integration */
    .topbar-dropdowns {
      gap: 1.2rem;
    }
    .topbar-select {
      padding: 0.4em 1.7em 0.4em 0.7em;
      border-radius: 7px;
      border: 2px solid var(--color-accent, #73C6B6);
      font-size: 1em;
      background: #fff;
      color: var(--color-primary, #003366);
      min-width: 120px;
      box-shadow: 0 1px 6px #00336611;
      transition: border 0.18s, box-shadow 0.18s, background 0.18s, color 0.18s;
      appearance: none;
      outline: none;
      font-weight: 500;
      margin: 0;
      height: 2.3em;
      position: relative;
      background-clip: padding-box;
      backdrop-filter: blur(1.5px);
    }
    .topbar-select:focus {
      border-color: var(--color-highlight, #F9D342);
      box-shadow: 0 0 0 2px var(--color-highlight, #F9D342)33;
      background: #f7fafd;
      color: var(--color-primary, #003366);
    }
    html[data-theme="dark"] .topbar-select {
      background: #232b3a !important;
      color: var(--color-highlight, #ffe066) !important;
      border: 2px solid var(--color-highlight, #ffe066) !important;
      box-shadow: 0 1px 6px #0008 !important;
      filter: brightness(1);
    }
    html[data-theme="dark"] .topbar-select:focus {
      background: #273146 !important;
      border-color: var(--color-highlight, #ffe066) !important;
      box-shadow: 0 0 0 2px var(--color-highlight, #ffe066)33 !important;
      color: var(--color-highlight, #ffe066) !important;
    }
    .topbar-select option {
      background: #fff;
      color: var(--color-primary, #003366);
      font-weight: 500;
    }
    html[data-theme="dark"] .topbar-select option {
      background: #232b3a !important;
      color: var(--color-highlight, #ffe066) !important;
      font-weight: 500;
    }
    .user-menu {
      color: var(--color-primary) !important;
      background: linear-gradient(90deg, #eaf1fb 0%, #f7fafd 100%);
      border-radius: 8px;
      padding: 0.3em 1.1em 0.3em 0.7em;
      box-shadow: 0 1px 6px #00336611;
      margin-left: 1.5em;
      min-width: 120px;
      display: flex;
      align-items: center;
      gap: 1em;
    }
    .logout-btn {
      color: var(--color-primary) !important;
      background: #eaf1fb;
      border-radius: 6px;
      padding: 0.3em 1.1em;
      font-weight: 500;
      transition: background 0.18s, color 0.18s;
      border: 1.5px solid var(--color-primary);
      margin-left: 0.5em;
    }
    .logout-btn:hover, .logout-btn:focus {
      background: var(--color-primary);
      color: #fff !important;
      outline: 2px solid var(--color-highlight);
      outline-offset: 2px;
    }
    .widget__title {
      letter-spacing: 0.2px;
      display: flex;
      align-items: center;
      gap: 0.5em;
      font-weight: 600;
      font-size: 1.13em;
      text-shadow: 0 1px 2px #00336611;
    }
    .main-tabs {
      background: #f4f6fa;
      border-radius: 8px;
      padding: 0.2em 0.7em;
      box-shadow: 0 1px 6px #00336608;
      margin-bottom: 0.2em;
    }
    .main-tabs .tab {
      padding: 0.5em 1.1em;
      border-radius: 6px 6px 0 0;
      font-weight: 500;
      transition: background 0.18s, color 0.18s;
      border-bottom: 2.5px solid transparent;
    }
    .main-tabs .tab.active {
      color: #003366;
      border-bottom: 2.5px solid #003366;
      background: #eaf1fb;
    }
    .main-tabs .tab:hover, .main-tabs .tab:focus {
      background: #eaf1fb;
      color: #003366;
    }
    .user-menu {
      position: relative;
      color: var(--color-on-primary, #fff) !important;
    }
    .user-name {
      display: inline-block;
      color: var(--color-on-primary, #fff) !important;
      font-weight: 500;
      font-size: 1rem;
      letter-spacing: 0.01em;
      vertical-align: middle;
      transition: color 0.18s;
    }
    .user-menu-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 2.2em;
      background: #fff;
      color: #003366;
      border-radius: 8px;
      box-shadow: 0 2px 12px #00336622;
      min-width: 160px;
      z-index: 10;
      padding: 0.5em 0;
      font-size: 1em;
    }
    .user-menu-dropdown.active {
      display: block;
    }
    .user-menu-dropdown a {
      display: block;
      padding: 0.7em 1.2em;
      color: #003366;
      text-decoration: none;
      border-bottom: 1px solid #eaf1fb;
      transition: background 0.15s;
    }
    .user-menu-dropdown a:last-child {
      border-bottom: none;
    }
    .user-menu-dropdown a:hover, .user-menu-dropdown a:focus {
      background: #eaf1fb;
      color: #003366;
      outline: none;
    }
    .user-menu-btn {
      background: none;
      border: none;
      color: inherit;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4em;
      padding: 0.2em 0.5em;
      border-radius: 6px;
      transition: background 0.15s;
    }
    .user-menu-btn:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
      background: #eaf1fb;
    }
    .user-menu-btn[aria-expanded="true"] {
      background: #eaf1fb;
    }
    /* Sidebar visual divider */
    .sidebar nav ul > li:not(:last-child) {
      border-bottom: 1px solid #e0e4ea;
      margin-bottom: 0.2em;
      padding-bottom: 0.2em;
    }
    html[data-theme="dark"] .sidebar nav ul > li:not(:last-child) {
      border-bottom: 1px solid #3a4a5a !important;
    }
    /* School selector dark mode */
    html[data-theme="dark"] .school-selector select {
      background: #232b3a !important;
      color: #ffe066 !important;
      border: 1px solid #3a4a5a !important;
    }
    .school-selector select:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    /* View selector styles */
    .view-selector {
      display: flex;
      gap: 0.2em;
      background: #f4f6fa;
      border-radius: 7px;
      box-shadow: 0 1px 6px #00336608;
      padding: 0.15em 0.5em;
      align-items: center;
    }
    .view-tab {
      background: none;
      border: none;
      color: #003366;
      font-weight: 500;
      font-size: 1em;
      padding: 0.45em 1.1em;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.18s, color 0.18s;
      outline: none;
    }
    .view-tab.active, .view-tab[aria-selected="true"] {
      background: #eaf1fb;
      color: #003366;
      box-shadow: 0 1px 6px #00336611;
    }
    .view-tab:hover, .view-tab:focus {
      background: #eaf1fb;
      color: #003366;
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
    html[data-theme="dark"] .view-selector {
      background: #232b3a !important;
      box-shadow: 0 1px 6px #0008 !important;
    }
    html[data-theme="dark"] .view-tab {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .view-tab.active, html[data-theme="dark"] .view-tab[aria-selected="true"] {
      background: #273146 !important;
      color: #ffe066 !important;
      box-shadow: 0 1px 6px #0004 !important;
    }
    /* Hide default select arrow for custom styling if desired */
    .school-selector select::-ms-expand { display: none; }
    .school-selector select::-webkit-input-placeholder { color: #003366; }
    html[data-theme="dark"] .school-selector select::-webkit-input-placeholder { color: #ffe066; }
    .visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; border: 0 !important; }
    .visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; border: 0 !important; }
    html[data-theme="dark"] .user-menu-dropdown {
      background: #232b3a !important;
      color: #ffe066 !important;
      box-shadow: 0 2px 12px #0008 !important;
    }
    html[data-theme="dark"] .user-menu-dropdown a {
      color: #ffe066 !important;
      border-bottom: 1px solid #3a4a5a !important;
    }
    html[data-theme="dark"] .user-menu-dropdown a:hover, html[data-theme="dark"] .user-menu-dropdown a:focus {
      background: #273146 !important;
      color: #fffbe7 !important;
    }
    html[data-theme="dark"] .user-menu-btn[aria-expanded="true"] {
      background: #273146 !important;
    }
    .theme-toggle:active {
      background: #dbeafe !important;
      color: #003366 !important;
    }
    .tab:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
    #studentSearchInput:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    #studentSearchBtn:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    .logout-btn:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
  </style>
  <script>
    // Theme toggle with icon feedback and keyboard support
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const html = document.documentElement;
    if (themeToggle && themeIcon) {
      function toggleTheme() {
        const isLight = html.getAttribute('data-theme') !== 'dark';
        html.setAttribute('data-theme', isLight ? 'dark' : 'light');
        themeToggle.setAttribute('aria-pressed', String(isLight));
        themeIcon.textContent = isLight ? 'üåô' : 'üåû';
        themeToggle.style.background = isLight ? '#003366' : '#eaf1fb';
        themeToggle.style.color = isLight ? '#fff' : '#003366';
      }
      themeToggle.addEventListener('click', toggleTheme);
      themeToggle.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleTheme();
        }
      });
    }

    // User menu dropdown interactivity
    const userMenu = document.querySelector('.user-menu');
    if (userMenu) {
      let dropdown = userMenu.querySelector('.user-menu-dropdown');
      if (!dropdown) {
        dropdown = document.createElement('div');
        dropdown.className = 'user-menu-dropdown';
        dropdown.innerHTML = `
          <a href="#" tabindex="0">Profile</a>
          <a href="#" tabindex="0">Settings</a>
          <a href="#" tabindex="0" id="logoutDropdown">Log Out</a>
        `;
        userMenu.appendChild(dropdown);
      }
      let btn = userMenu.querySelector('.user-menu-btn');
      if (!btn) {
        const name = userMenu.querySelector('#userName');
        btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'user-menu-btn';
        btn.setAttribute('aria-haspopup', 'true');
        btn.setAttribute('aria-expanded', 'false');
        btn.innerHTML = `<span style="font-size:1.1em;">üë§</span> <span class="user-name">${name ? name.textContent : 'User'}</span> <span aria-hidden="true" style="font-size:0.9em;">‚ñº</span>`;
        if (name) name.replaceWith(btn);
      }
      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        dropdown.classList.toggle('active', !expanded);
        if (!expanded) {
          dropdown.querySelector('a')?.focus();
        }
      });
      btn.addEventListener('keydown', function(e) {
        if ((e.key === 'Enter' || e.key === ' ') && !dropdown.classList.contains('active')) {
          e.preventDefault();
          btn.click();
        }
        if (e.key === 'Escape' && dropdown.classList.contains('active')) {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
          btn.focus();
        }
      });
      dropdown.addEventListener('keydown', function(e) {
        const links = Array.from(dropdown.querySelectorAll('a'));
        const idx = links.indexOf(document.activeElement);
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          links[(idx + 1) % links.length].focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          links[(idx - 1 + links.length) % links.length].focus();
        } else if (e.key === 'Escape') {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
          btn.focus();
        }
      });
      document.addEventListener('click', function(e) {
        if (!userMenu.contains(e.target)) {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
        }
      });
      // Log out from dropdown
      const logoutDropdown = dropdown.querySelector('#logoutDropdown');
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutDropdown && logoutBtn) {
        logoutDropdown.addEventListener('click', function(e) {
          e.preventDefault();
          logoutBtn.click();
        });
      }
    }

    // Skip to content link focus management
    const skipLink = document.querySelector('.skip-link');
    if (skipLink) {
      skipLink.addEventListener('click', function(e) {
        const main = document.getElementById('mainContent');
        if (main) {
          main.setAttribute('tabindex', '-1');
          main.focus();
        }
      });
    }

    // Sidebar keyboard navigation (arrow keys)
    const sidebarLinks = Array.from(document.querySelectorAll('.sidebar-link-animated'));
    sidebarLinks.forEach((link, idx) => {
      link.addEventListener('keydown', e => {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          const next = sidebarLinks[(idx + 1) % sidebarLinks.length];
          next.focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          const prev = sidebarLinks[(idx - 1 + sidebarLinks.length) % sidebarLinks.length];
          prev.focus();
        } else if (e.key === 'Home') {
          e.preventDefault();
          sidebarLinks[0].focus();
        } else if (e.key === 'End') {
          e.preventDefault();
          sidebarLinks[sidebarLinks.length - 1].focus();
        }
      });
    });

    // Student search interactivity (demo only)
    const studentSearchForm = document.querySelector('.find-bar');
    const studentSearchInput = document.getElementById('studentSearchInput');
    const studentSearchResult = document.getElementById('studentSearchResult');
    if (studentSearchForm && studentSearchInput && studentSearchResult) {
      studentSearchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const val = studentSearchInput.value.trim();
        if (val.length > 0) {
          studentSearchResult.textContent = `Searching for "${val}"... (demo)`;
        } else {
          studentSearchResult.textContent = '';
        }
      });
      studentSearchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          studentSearchForm.dispatchEvent(new Event('submit'));
        }
      });
    }

    // Announcements live region demo
    const announcements = document.querySelector('.widgets-right .widget__body p');
    if (announcements) {
      announcements.setAttribute('aria-live', 'polite');
    }
  
  // View selector dropdown interactivity and dynamic theme
  const viewSelect = document.getElementById('viewSelect');
  function setViewTheme(view) {
    const html = document.documentElement;
    let themeVars = {};
    if (view === 'district') {
      themeVars = {
        '--color-primary': '#4A90E2', // Denim Blue
        '--color-accent': '#73C6B6', // Soft Teal
        '--color-bg': '#FDF6EC', // Warm Cream
        '--color-highlight': '#F9D342', // Goldenrod Yellow
        '--color-alt': '#A28DFF', // Slate Purple
        '--color-success': '#B2F2BB', // Cool Mint
        '--color-error': '#F67280', // Muted Coral Red
        '--color-on-primary': '#fff',
        '--color-on-bg': '#234',
      };
      if (html.getAttribute('data-theme') === 'dark') {
        themeVars['--color-primary'] = '#4A90E2';
        themeVars['--color-accent'] = '#73C6B6';
        themeVars['--color-bg'] = '#232b3a';
        themeVars['--color-highlight'] = '#ffe066';
        themeVars['--color-alt'] = '#A28DFF';
        themeVars['--color-success'] = '#B2F2BB';
        themeVars['--color-error'] = '#F67280';
        themeVars['--color-on-primary'] = '#fff';
        themeVars['--color-on-bg'] = '#eaf1fb';
      }
    } else if (view === 'school') {
      themeVars = {
        '--color-primary': '#A28DFF', // Slate Purple
        '--color-accent': '#B2F2BB', // Cool Mint
        '--color-bg': '#FDF6EC',
        '--color-highlight': '#F9D342',
        '--color-alt': '#4A90E2',
        '--color-success': '#73C6B6',
        '--color-error': '#F67280',
        '--color-on-primary': '#fff',
        '--color-on-bg': '#234',
      };
      if (html.getAttribute('data-theme') === 'dark') {
        themeVars['--color-primary'] = '#A28DFF';
        themeVars['--color-accent'] = '#B2F2BB';
        themeVars['--color-bg'] = '#232b3a';
        themeVars['--color-highlight'] = '#ffe066';
        themeVars['--color-alt'] = '#4A90E2';
        themeVars['--color-success'] = '#73C6B6';
        themeVars['--color-error'] = '#F67280';
        themeVars['--color-on-primary'] = '#fff';
        themeVars['--color-on-bg'] = '#eaf1fb';
      }
    } else if (view === 'health') {
      themeVars = {
        '--color-primary': '#F67280', // Muted Coral Red
        '--color-accent': '#F9D342', // Goldenrod Yellow
        '--color-bg': '#FDF6EC',
        '--color-highlight': '#A28DFF',
        '--color-alt': '#4A90E2',
        '--color-success': '#B2F2BB',
        '--color-error': '#A28DFF',
        '--color-on-primary': '#fff',
        '--color-on-bg': '#234',
      };
      if (html.getAttribute('data-theme') === 'dark') {
        themeVars['--color-primary'] = '#F67280';
        themeVars['--color-accent'] = '#F9D342';
        themeVars['--color-bg'] = '#232b3a';
        themeVars['--color-highlight'] = '#ffe066';
        themeVars['--color-alt'] = '#4A90E2';
        themeVars['--color-success'] = '#B2F2BB';
        themeVars['--color-error'] = '#A28DFF';
        themeVars['--color-on-primary'] = '#fff';
        themeVars['--color-on-bg'] = '#eaf1fb';
      }
    }
    for (const key in themeVars) {
      html.style.setProperty(key, themeVars[key]);
    }
  }
  if (viewSelect) {
    setViewTheme(viewSelect.value);
    viewSelect.addEventListener('change', function() {
      setViewTheme(this.value);
    });
  }

  // Intercept links to non-existent pages and show alert
function handleMissingPageLinks(selector) {
  document.querySelectorAll(selector).forEach(link => {
    if (link.getAttribute('href') === '#' || link.getAttribute('href') === '' || link.getAttribute('href') === null) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        alert('This page has not been created yet.');
      });
    }
  });
}
handleMissingPageLinks('.sidebar-link, .sidebar-link-animated, .widget__body a');
  </script>
</body>
</html>
