<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aspen District View</title>

  <link rel="stylesheet" href="../styles/common-mo.css">
  <link rel="stylesheet" href="../styles/layout.css">
  <link rel="stylesheet" href="../styles/utils.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/themes.css">
</head>
<body>
  <a href="#mainContent" class="skip-link" style="position: absolute; left: -999px; top: auto; width: 1px; height: 1px; overflow: hidden; background: #003366; color: #fff; z-index: 1000; padding: 0.5em 1em; border-radius: 6px; font-weight: bold;">Skip to main content</a>
  <form name="authenticatedActionForm" method="post" action="/aspen/home.do">
    <input type="hidden" name="org.apache.struts.taglib.html.TOKEN" value="af769c85d55ffa9d66033b7705551f45">
    <input type="hidden" id="userEvent" name="userEvent" value="0">
    <input type="hidden" id="userParam" name="userParam" value="">
    <input type="hidden" id="operationId" name="operationId" value="">
    <input type="hidden" id="deploymentId" name="deploymentId" value="aspen">
    <input type="hidden" id="scrollX" name="scrollX" value="0">
    <input type="hidden" id="scrollY" name="scrollY" value="0">
    <input type="hidden" id="formFocusField" name="formFocusField" value="">
    <div class="layout-wrapper" style="background: linear-gradient(120deg, #eaf1fb 0%, #f7fafd 100%); min-height: 100vh;">
      <header class="top-nav" style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 1.5rem; background: var(--color-primary, #003366); color: #fff; box-shadow: 0 2px 8px #00336622;" role="banner">
        <div style="font-weight: bold; font-size: 1.3rem; letter-spacing: 1px; display: flex; align-items: center; gap: 0.75rem;">
          <img src="../../images/aspen-header-logo.png" alt="Aspen Logo" style="height: 2.2rem; vertical-align: middle;">
          Chicago Public Schools
        </div>
        <div style="display: flex; align-items: center; gap: 1.5rem; flex: 1; justify-content: center;">
          <!-- View Selector -->
          <nav aria-label="View selector" style="margin-right: 1.5rem;">
            <div class="view-selector" role="tablist" aria-label="Select view">
              <button type="button" class="view-tab active" role="tab" aria-selected="true" tabindex="0" id="viewDistrict">District</button>
              <button type="button" class="view-tab" role="tab" aria-selected="false" tabindex="-1" id="viewSchool">School</button>
              <button type="button" class="view-tab" role="tab" aria-selected="false" tabindex="-1" id="viewHealth">Health</button>
            </div>
          </nav>
          <!-- Main Navigation Tabs -->
          <nav aria-label="Main navigation" role="navigation">
            <ul class="main-tabs" style="display: flex; gap: 1.5rem; list-style: none; margin: 0; padding: 0;">
              <li><a href="/aspen/home.do" class="tab active" aria-current="page" tabindex="0">Pages</a></li>
              <li><a href="/aspen/studentContextList.do?navkey=student.std.list" class="tab" tabindex="0">Student</a></li>
              <li><a href="/aspen/dailyHealthLog.do?navkey=healthLog.hlg.list" class="tab" tabindex="0">Visit</a></li>
              <li><a href="/aspen/contextList.do?navkey=healthCnd.condition.history" class="tab" tabindex="0">Condition</a></li>
              <li><a href="/aspen/screeningList.do?navkey=healthScr.screening.history" class="tab" tabindex="0">Screening</a></li>
              <li><a href="/aspen/contextList.do?navkey=healthMed.order.list" class="tab" tabindex="0">Medication</a></li>
              <li><a href="/aspen/contextList.do?navkey=healthAlr.alert.history" class="tab" tabindex="0">Alert</a></li>
            </ul>
          </nav>
          <!-- School Selector -->
          <div class="school-selector" style="margin-left: 1.5rem;">
            <label for="schoolSelect" class="visually-hidden">Select School</label>
            <select id="schoolSelect" name="schoolSelect" aria-label="Select School" style="padding: 0.4em 1.2em 0.4em 0.7em; border-radius: 6px; border: 1px solid #b3c7e6; font-size: 1em; background: #fff; color: #003366; min-width: 120px;">
              <option>School A</option>
              <option>School B</option>
              <option>School C</option>
              <option>School D</option>
              <option>School E</option>
            </select>
          </div>
        </div>
        <div class="user-menu" style="display: flex; align-items: center; gap: 1rem;">
          <span id="userName" style="font-size: 1rem;">Jane Admin</span>
          <button type="button" id="logoutBtn" class="logout-btn" style="background: none; border: none; color: #fff; cursor: pointer; font-size: 1rem;">Log Out</button>
        </div>
      </header>
      <section class="hero-banner" style="position: relative; background: url('../../images/aspen-portal-bg.png') center/cover no-repeat, linear-gradient(120deg, #eaf1fb 0%, #f7fafd 100%); min-height: 140px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px #00336611; overflow: hidden;">
        <div class="hero-animated-bg" style="position: absolute; inset: 0; pointer-events: none; z-index: 0;">
          <svg width="100%" height="100%" viewBox="0 0 1440 180" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: block;">
            <path d="M0,120 Q360,180 720,120 T1440,120 V180 H0Z" fill="#b3c7e6" fill-opacity="0.13">
              <animate attributeName="d" dur="8s" repeatCount="indefinite"
                values="M0,120 Q360,180 720,120 T1440,120 V180 H0Z;M0,110 Q360,160 720,130 T1440,110 V180 H0Z;M0,120 Q360,180 720,120 T1440,120 V180 H0Z" />
            </path>
          </svg>
        </div>
        <div style="background: rgba(255,255,255,0.88); border-radius: 14px; padding: 2rem 2.7rem; margin: 2.2rem 0; text-align: center; max-width: 700px; position: relative; z-index: 1; box-shadow: 0 2px 12px #00336613;">
          <h1 style="font-size: 2.1rem; color: #003366; margin-bottom: 0.5rem; letter-spacing: 0.5px;">Welcome to Aspen</h1>
          <p style="font-size: 1.13rem; color: #234; margin-bottom: 0.5rem;">Empowering educators, students, and families to connect, collaborate, and succeed together.</p>
          <p style="font-size: 1.01rem; color: #3a4a5a; margin: 0;">This is your community hub for learning, support, and growth across Chicago Public Schools.</p>
        </div>
      </section>
      <div style="display: flex; justify-content: center; background: #f7f7f7; padding: 0.5rem 0;">
        <button type="button" id="themeToggle" class="theme-toggle" aria-label="Toggle color scheme" aria-pressed="false" style="display: flex; align-items: center; gap: 0.5em; font-size: 1.05rem; background: #eaf1fb; color: #003366; border: 1px solid #b3c7e6; border-radius: 6px; padding: 0.45em 1.2em; box-shadow: 0 1px 4px #00336611; cursor: pointer; transition: background 0.2s, color 0.2s;">
          <span id="themeIcon" aria-hidden="true" style="font-size: 1.2em;">🌞</span> <span>Toggle Theme</span>
        </button>
      </div>

    <div class="layout-grid">
      <aside class="layout-grid__sidebar sidebar" style="background: #f4f6fa; min-width: 220px; max-width: 260px; padding: 2.5rem 1.2rem 2.5rem 1.7rem; border-right: 1px solid #e0e4ea; box-shadow: 2px 0 8px #00336608;" aria-label="Sidebar" role="complementary">
        <nav aria-label="Sidebar navigation" role="navigation">
          <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1.7rem;">
            <li><a href="#" class="sidebar-link sidebar-link-animated" style="font-weight: 600; color: #003366;" tabindex="0">Dashboard</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">My Students</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Attendance</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Gradebook</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Reports</a></li>
            <li><a href="#" class="sidebar-link sidebar-link-animated" tabindex="0">Resources</a></li>
            <li style="margin-top: 2.5rem;">
              <div style="background: #eaf1fb; border-radius: 8px; padding: 1rem 0.8rem; text-align: center; color: #234; font-size: 0.98rem; box-shadow: 0 1px 4px #00336611;">
                <strong>Community Tip:</strong><br>
                <span>Connect with colleagues in the <a href="#" style="color: #003366; text-decoration: underline;">Staff Room</a> or check <a href="#" style="color: #003366; text-decoration: underline;">District News</a>.</span>
              </div>
            </li>
          </ul>
        </nav>
      </aside>

      <main id="mainContent" class="layout-grid__main main-panel" style="flex: 1; padding: 2.5rem 2.5rem 2.5rem 2rem; background: #fff; min-height: 80vh; border-radius: 18px 0 0 0; box-shadow: 0 2px 16px #00336611;" tabindex="-1" aria-label="Main content">
        <div class="main-widgets" style="display: grid; grid-template-columns: 1fr 340px; gap: 2.5rem; align-items: flex-start;">
          <div class="widgets-left" style="display: flex; flex-direction: column; gap: 2.2rem;">
            <section class="widget" style="background: #f9fafb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.15rem; color: #003366;">Quick Links</h2></div>
              <div class="widget__body">
                <ul style="padding-left: 1.2rem; display: flex; flex-wrap: wrap; gap: 1.2rem 2.5rem;">
                  <li><a href="#" style="font-weight: 500; color: #003366;" tabindex="0">View Students</a></li>
                  <li><a href="#" style="font-weight: 500; color: #003366;" tabindex="0">Attendance</a></li>
                  <li><a href="#" style="font-weight: 500; color: #003366;" tabindex="0">Gradebook</a></li>
                </ul>
              </div>
            </section>
            <section class="widget" style="background: #f9fafb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.15rem; color: #003366;">Student Search</h2></div>
              <div class="widget__body">
                <form class="find-bar" style="display: flex; gap: 1rem; align-items: center;" role="search" aria-label="Student search" onsubmit="return false;">
                  <input type="text" placeholder="Search students" aria-label="Search students" style="flex: 1; padding: 0.5rem 1rem; border-radius: 6px; border: 1px solid #d1d5db;" id="studentSearchInput">
                  <button type="submit" id="studentSearchBtn" style="padding: 0.5rem 1.2rem; border-radius: 6px; border: none; background: var(--color-primary, #003366); color: #fff; cursor: pointer;" aria-label="Filter students">Filter</button>
                </form>
                <div id="studentSearchResult" aria-live="polite" style="margin-top: 0.5em; font-size: 0.98em; color: #234;"></div>
              </div>
            </section>
            <section class="widget" style="background: #f9fafb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.15rem; color: #003366;">Workflows</h2></div>
              <div class="widget__body"><p style="color: #666;">No current workflows.</p></div>
            </section>
            <section class="widget" style="background: #f9fafb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.15rem; color: #003366;">Published Reports</h2></div>
              <div class="widget__body"><p style="color: #666;">No published reports.</p></div>
            </section>
          </div>
          <div class="widgets-right" style="display: flex; flex-direction: column; gap: 2.2rem;">
            <section class="widget" style="background: #f9fafb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.15rem; color: #003366;">Announcements</h2></div>
              <div class="widget__body"><p style="color: #666;">No announcements.</p></div>
            </section>
            <section class="widget" style="background: #eaf1fb; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.7rem 1.7rem 1.2rem 1.7rem; border: 1.5px dashed #b3c7e6;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.08rem; color: #003366;">Community Board</h2></div>
              <div class="widget__body"><p style="color: #234;">Share a resource, celebrate a success, or ask for help! <a href="#" style="color: #003366; text-decoration: underline;">Post to the board</a></p></div>
            </section>
            <section class="widget" style="background: #fffbe7; border-radius: 12px; box-shadow: 0 1px 8px #00336611; padding: 1.5rem 1.5rem 1.1rem 1.5rem; border: 1.5px solid #ffe066;">
              <div class="widget__header"><h2 class="widget__title" style="font-size: 1.08rem; color: #b38f00; display: flex; align-items: center; gap: 0.5em;"><span style="font-size: 1.2em;">⭐</span> Featured Resource</h2></div>
              <div class="widget__body"><p style="color: #7a6700;">Check out the new <a href="#" style="color: #b38f00; text-decoration: underline; font-weight: 500;">CPS Family Engagement Toolkit</a> for ideas to strengthen your classroom community.</p></div>
            </section>
          </div>
        </div>
      </main>
    </div>
    </div>
  </form>
  <script type="module" src="../scripts/components.js"></script>
  <style>
    html[data-theme="dark"] body,
    html[data-theme="dark"] .layout-wrapper {
      background: linear-gradient(120deg, #1a2332 0%, #232b3a 100%) !important;
      color: #eaf1fb !important;
    }
    html[data-theme="dark"] .main-panel {
      background: #232b3a !important;
      color: #eaf1fb !important;
      box-shadow: 0 2px 16px #0006 !important;
    }
    html[data-theme="dark"] .widget {
      background: #273146 !important;
      color: #eaf1fb !important;
      box-shadow: 0 1px 8px #0004 !important;
    }
    html[data-theme="dark"] .widget__header h2,
    html[data-theme="dark"] .widget__title {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .sidebar {
      background: #20293a !important;
      border-right: 1px solid #2d3a4d !important;
      color: #eaf1fb !important;
      box-shadow: 2px 0 8px #0002 !important;
    }
    html[data-theme="dark"] .sidebar-link-animated {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .sidebar-link-animated:hover, html[data-theme="dark"] .sidebar-link-animated:focus {
      background: #273146 !important;
      color: #fffbe7 !important;
    }
    html[data-theme="dark"] .widget__body a {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .widget__body a:hover, html[data-theme="dark"] .widget__body a:focus {
      color: #fffbe7 !important;
    }
    html[data-theme="dark"] .theme-toggle {
      background: #232b3a !important;
      color: #ffe066 !important;
      border: 1px solid #3a4a5a !important;
    }
    html[data-theme="dark"] .hero-banner {
      background: linear-gradient(120deg, #232b3a 0%, #1a2332 100%) !important;
    }
    html[data-theme="dark"] .hero-animated-bg path {
      fill: #ffe066 !important;
      fill-opacity: 0.08 !important;
    }
    html[data-theme="dark"] .widget[style*='#fffbe7'] {
      background: #2d2a1a !important;
      border-color: #ffe066 !important;
    }
    html[data-theme="dark"] .widget[style*='#eaf1fb'] {
      background: #232b3a !important;
      border-color: #3a4a5a !important;
    }
    html[data-theme="dark"] .main-tabs .tab.active {
      color: #ffe066 !important;
      border-bottom: 2.5px solid #ffe066 !important;
    }
    html[data-theme="dark"] .main-tabs .tab {
      color: #eaf1fb !important;
    }
    html[data-theme="dark"] .main-tabs .tab:hover, html[data-theme="dark"] .main-tabs .tab:focus {
      color: #ffe066 !important;
      background: #273146 !important;
    }
    html[data-theme="dark"] .user-menu {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .logout-btn {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .skip-link {
      background: #232b3a !important;
      color: #ffe066 !important;
    }
    /* End dark mode styles */
    .skip-link:focus {
      left: 1rem;
      top: 1rem;
      width: auto;
      height: auto;
      overflow: visible;
      outline: 3px solid #ffe066;
      outline-offset: 2px;
    }
    .sidebar-link-animated {
      transition: background 0.18s, color 0.18s, box-shadow 0.18s;
      border-radius: 6px;
      padding: 0.18em 0.5em;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5em;
      min-height: 2.2em;
      font-size: 1.04em;
      list-style-type: disc;
      list-style-position: inside;
    }
    .sidebar-link-animated::before {
      content: '\2022';
      color: #003366;
      margin-right: 0.6em;
      font-size: 1.1em;
      display: inline-block;
      vertical-align: middle;
    }
    html[data-theme="dark"] .sidebar-link-animated::before {
      color: #ffe066 !important;
    }
    .sidebar-link-animated:hover, .sidebar-link-animated:focus {
      background: #eaf1fb;
      color: #003366;
      box-shadow: 0 2px 8px #00336611;
      outline: none;
      text-decoration: underline;
    }
    .sidebar-link-animated:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    .widget__body a:hover, .widget__body a:focus {
      color: #00509e !important;
      text-decoration: underline;
    }
    .widget__title {
      letter-spacing: 0.2px;
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    .main-tabs {
      background: #f4f6fa;
      border-radius: 8px;
      padding: 0.2em 0.7em;
      box-shadow: 0 1px 6px #00336608;
      margin-bottom: 0.2em;
    }
    .main-tabs .tab {
      padding: 0.5em 1.1em;
      border-radius: 6px 6px 0 0;
      font-weight: 500;
      transition: background 0.18s, color 0.18s;
      border-bottom: 2.5px solid transparent;
    }
    .main-tabs .tab.active {
      color: #003366;
      border-bottom: 2.5px solid #003366;
      background: #eaf1fb;
    }
    .main-tabs .tab:hover, .main-tabs .tab:focus {
      background: #eaf1fb;
      color: #003366;
    }
    .user-menu {
      position: relative;
    }
    .user-menu-dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 2.2em;
      background: #fff;
      color: #003366;
      border-radius: 8px;
      box-shadow: 0 2px 12px #00336622;
      min-width: 160px;
      z-index: 10;
      padding: 0.5em 0;
      font-size: 1em;
    }
    .user-menu-dropdown.active {
      display: block;
    }
    .user-menu-dropdown a {
      display: block;
      padding: 0.7em 1.2em;
      color: #003366;
      text-decoration: none;
      border-bottom: 1px solid #eaf1fb;
      transition: background 0.15s;
    }
    .user-menu-dropdown a:last-child {
      border-bottom: none;
    }
    .user-menu-dropdown a:hover, .user-menu-dropdown a:focus {
      background: #eaf1fb;
      color: #003366;
      outline: none;
    }
    .user-menu-btn {
      background: none;
      border: none;
      color: inherit;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4em;
      padding: 0.2em 0.5em;
      border-radius: 6px;
      transition: background 0.15s;
    }
    .user-menu-btn:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
      background: #eaf1fb;
    }
    .user-menu-btn[aria-expanded="true"] {
      background: #eaf1fb;
    }
    /* Sidebar visual divider */
    .sidebar nav ul > li:not(:last-child) {
      border-bottom: 1px solid #e0e4ea;
      margin-bottom: 0.2em;
      padding-bottom: 0.2em;
    }
    html[data-theme="dark"] .sidebar nav ul > li:not(:last-child) {
      border-bottom: 1px solid #3a4a5a !important;
    }
    /* School selector dark mode */
    html[data-theme="dark"] .school-selector select {
      background: #232b3a !important;
      color: #ffe066 !important;
      border: 1px solid #3a4a5a !important;
    }
    .school-selector select:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    /* View selector styles */
    .view-selector {
      display: flex;
      gap: 0.2em;
      background: #f4f6fa;
      border-radius: 7px;
      box-shadow: 0 1px 6px #00336608;
      padding: 0.15em 0.5em;
      align-items: center;
    }
    .view-tab {
      background: none;
      border: none;
      color: #003366;
      font-weight: 500;
      font-size: 1em;
      padding: 0.45em 1.1em;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.18s, color 0.18s;
      outline: none;
    }
    .view-tab.active, .view-tab[aria-selected="true"] {
      background: #eaf1fb;
      color: #003366;
      box-shadow: 0 1px 6px #00336611;
    }
    .view-tab:hover, .view-tab:focus {
      background: #eaf1fb;
      color: #003366;
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
    html[data-theme="dark"] .view-selector {
      background: #232b3a !important;
      box-shadow: 0 1px 6px #0008 !important;
    }
    html[data-theme="dark"] .view-tab {
      color: #ffe066 !important;
    }
    html[data-theme="dark"] .view-tab.active, html[data-theme="dark"] .view-tab[aria-selected="true"] {
      background: #273146 !important;
      color: #ffe066 !important;
      box-shadow: 0 1px 6px #0004 !important;
    }
    /* Hide default select arrow for custom styling if desired */
    .school-selector select::-ms-expand { display: none; }
    .school-selector select::-webkit-input-placeholder { color: #003366; }
    html[data-theme="dark"] .school-selector select::-webkit-input-placeholder { color: #ffe066; }
    .visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; border: 0 !important; }
    .visually-hidden { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; border: 0 !important; }
    html[data-theme="dark"] .user-menu-dropdown {
      background: #232b3a !important;
      color: #ffe066 !important;
      box-shadow: 0 2px 12px #0008 !important;
    }
    html[data-theme="dark"] .user-menu-dropdown a {
      color: #ffe066 !important;
      border-bottom: 1px solid #3a4a5a !important;
    }
    html[data-theme="dark"] .user-menu-dropdown a:hover, html[data-theme="dark"] .user-menu-dropdown a:focus {
      background: #273146 !important;
      color: #fffbe7 !important;
    }
    html[data-theme="dark"] .user-menu-btn[aria-expanded="true"] {
      background: #273146 !important;
    }
    .theme-toggle:active {
      background: #dbeafe !important;
      color: #003366 !important;
    }
    .tab:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
    #studentSearchInput:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    #studentSearchBtn:focus {
      outline: 2px solid #003366;
      outline-offset: 2px;
    }
    .logout-btn:focus {
      outline: 2px solid #ffe066;
      outline-offset: 2px;
    }
  </style>
  <script>
    // Theme toggle with icon feedback and keyboard support
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const html = document.documentElement;
    if (themeToggle && themeIcon) {
      function toggleTheme() {
        const isLight = html.getAttribute('data-theme') !== 'dark';
        html.setAttribute('data-theme', isLight ? 'dark' : 'light');
        themeToggle.setAttribute('aria-pressed', String(isLight));
        themeIcon.textContent = isLight ? '🌙' : '🌞';
        themeToggle.style.background = isLight ? '#003366' : '#eaf1fb';
        themeToggle.style.color = isLight ? '#fff' : '#003366';
      }
      themeToggle.addEventListener('click', toggleTheme);
      themeToggle.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleTheme();
        }
      });
    }

    // User menu dropdown interactivity
    const userMenu = document.querySelector('.user-menu');
    if (userMenu) {
      let dropdown = userMenu.querySelector('.user-menu-dropdown');
      if (!dropdown) {
        dropdown = document.createElement('div');
        dropdown.className = 'user-menu-dropdown';
        dropdown.innerHTML = `
          <a href="#" tabindex="0">Profile</a>
          <a href="#" tabindex="0">Settings</a>
          <a href="#" tabindex="0" id="logoutDropdown">Log Out</a>
        `;
        userMenu.appendChild(dropdown);
      }
      let btn = userMenu.querySelector('.user-menu-btn');
      if (!btn) {
        const name = userMenu.querySelector('#userName');
        btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'user-menu-btn';
        btn.setAttribute('aria-haspopup', 'true');
        btn.setAttribute('aria-expanded', 'false');
        btn.innerHTML = `<span style="font-size:1.1em;">👤</span> <span>${name ? name.textContent : 'User'}</span> <span aria-hidden="true" style="font-size:0.9em;">▼</span>`;
        name && name.replaceWith(btn);
      }
      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        dropdown.classList.toggle('active', !expanded);
        if (!expanded) {
          dropdown.querySelector('a')?.focus();
        }
      });
      btn.addEventListener('keydown', function(e) {
        if ((e.key === 'Enter' || e.key === ' ') && !dropdown.classList.contains('active')) {
          e.preventDefault();
          btn.click();
        }
        if (e.key === 'Escape' && dropdown.classList.contains('active')) {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
          btn.focus();
        }
      });
      dropdown.addEventListener('keydown', function(e) {
        const links = Array.from(dropdown.querySelectorAll('a'));
        const idx = links.indexOf(document.activeElement);
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          links[(idx + 1) % links.length].focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          links[(idx - 1 + links.length) % links.length].focus();
        } else if (e.key === 'Escape') {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
          btn.focus();
        }
      });
      document.addEventListener('click', function(e) {
        if (!userMenu.contains(e.target)) {
          dropdown.classList.remove('active');
          btn.setAttribute('aria-expanded', 'false');
        }
      });
      // Log out from dropdown
      const logoutDropdown = dropdown.querySelector('#logoutDropdown');
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutDropdown && logoutBtn) {
        logoutDropdown.addEventListener('click', function(e) {
          e.preventDefault();
          logoutBtn.click();
        });
      }
    }

    // Skip to content link focus management
    const skipLink = document.querySelector('.skip-link');
    if (skipLink) {
      skipLink.addEventListener('click', function(e) {
        const main = document.getElementById('mainContent');
        if (main) {
          main.setAttribute('tabindex', '-1');
          main.focus();
        }
      });
    }

    // Sidebar keyboard navigation (arrow keys)
    const sidebarLinks = Array.from(document.querySelectorAll('.sidebar-link-animated'));
    sidebarLinks.forEach((link, idx) => {
      link.addEventListener('keydown', e => {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          const next = sidebarLinks[(idx + 1) % sidebarLinks.length];
          next.focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          const prev = sidebarLinks[(idx - 1 + sidebarLinks.length) % sidebarLinks.length];
          prev.focus();
        } else if (e.key === 'Home') {
          e.preventDefault();
          sidebarLinks[0].focus();
        } else if (e.key === 'End') {
          e.preventDefault();
          sidebarLinks[sidebarLinks.length - 1].focus();
        }
      });
    });

    // Student search interactivity (demo only)
    const studentSearchForm = document.querySelector('.find-bar');
    const studentSearchInput = document.getElementById('studentSearchInput');
    const studentSearchResult = document.getElementById('studentSearchResult');
    if (studentSearchForm && studentSearchInput && studentSearchResult) {
      studentSearchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const val = studentSearchInput.value.trim();
        if (val.length > 0) {
          studentSearchResult.textContent = `Searching for "${val}"... (demo)`;
        } else {
          studentSearchResult.textContent = '';
        }
      });
      studentSearchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          studentSearchForm.dispatchEvent(new Event('submit'));
        }
      });
    }

    // Announcements live region demo
    const announcements = document.querySelector('.widgets-right .widget__body p');
    if (announcements) {
      announcements.setAttribute('aria-live', 'polite');
    }
  
  // View selector interactivity
  const viewTabs = Array.from(document.querySelectorAll('.view-tab'));
  viewTabs.forEach((tab, idx) => {
    tab.addEventListener('click', function() {
      viewTabs.forEach(t => {
        t.classList.remove('active');
        t.setAttribute('aria-selected', 'false');
        t.tabIndex = -1;
      });
      tab.classList.add('active');
      tab.setAttribute('aria-selected', 'true');
      tab.tabIndex = 0;
      tab.focus();
    });
    tab.addEventListener('keydown', function(e) {
      let nextIdx = idx;
      if (e.key === 'ArrowRight') {
        nextIdx = (idx + 1) % viewTabs.length;
      } else if (e.key === 'ArrowLeft') {
        nextIdx = (idx - 1 + viewTabs.length) % viewTabs.length;
      } else {
        return;
      }
      e.preventDefault();
      viewTabs[nextIdx].click();
    });
  });

  </script>
</body>
</html>
